<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>TennisKids 2023</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
        <link rel="stylesheet" type="text/css" href="design_files/css/style.css">
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
               
        <script type="text/javascript" src="jquery-3.3.1.min.js"></script>
        <script type="text/javascript" src="floating-wpp.min.js"></script>
        <link rel="stylesheet" href="floating-wpp.min.css">

        <!-- MATERIAL DESIGN ICONIC FONT -->
        <link rel="stylesheet" href="design_files/fonts/material-design-iconic-font/css/material-design-iconic-font.min.css">
                
        <!-- STYLE CSS -->
        <link rel="stylesheet" href="design_files/css/style.css">
    
        <!-- javadev -->

        <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

    </head>

    <body>

        <header>

            <div class="logo">
                <img  href="index.html" src="./design_files/images/logotenniskidsindex.png" alt="image">
            </div>

            <div class="logosponsor">
                <img class="logosponsorimg" href="index.html" src="./design_files/images/logoTK.png" alt="image">
            </div>
            
            <input type="checkbox" id="menu-bar">
            <label for="menu-bar">
                <img class="imgmenu" src="./design_files/images/menubtnblanc.png" alt="image">
            </label>

            <div class="menutop">
                <ul>

                    <li class="boutonm"><a style="background-color: rgba(10, 32, 75, 0.836); box-shadow: -1px 1px 9px rgba(42, 55, 168, 0.74);
                        color: white; font-size: 16px; padding : 8px 20px; font-family: 'Poppins', sans-serif;
                         border-top-right-radius: 12px; border-top-left-radius: 12px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;"
                         href="index.html" onclick="toggleMenu();">Tableau final et Resultats</a>
                    </li>

                    <li class="boutonm" > <img class="imgmenu" src="./design_files/images/affichephoneapp.png" alt="image"> </li>

                    <li class="boutonm"><a href="programme.html" onclick="toggleMenu();">+ Programmation des matchs</a> </li>

                    <li class="boutonm"><a href="formulaire.html" onclick="toggleMenu();">+ Inscrivez vous maintenant</a> </li>

                </ul>
            </div>
            
        </header>

        <section class="indisponibletxt" style="display: none;">
            <a class="txtindis">Désole ce site est accessible uniquement sur des equipements mobiles ( smartphones, tablettes etc ... )</a>
        </section>

        <section class="formulaire" id="formulaire">
            <div class="devisbloc">

                <form name="formweb" action="">

                    <h1>Inscrivez vous</h1>
                    <h3 class="textcontenu" style="margin-bottom: 5px;">Remplissez ces champs exactement comme indiqué ci après .</h3>

                    <h3 class="textcontenu">NB: DATE LIMITE DES INSCRIPTIONS : Dimanche 13 Aout 2023 à 15H . Une fois ce délai dépassé, ce formulaire 
                        sera indisponible pour tout joueur souhaitant participer à la première semaine de tournoi. </h3>

                    <div class="form-wrapper">
                        <a class="titleform">Noms et prénoms du joueur</a>
                        <input id="nomuser" style="padding-left: 15px;" type="email" placeholder="Comme sur l'acte de naissance ..." class="form-controla">
                    </div>

                    <div class="form-wrapper">
                        <a class="titleform">Choisissez votre Categorie </a>
                        <select id="selectcat" style="display: block; margin-bottom: 20px; width: 100%; 
                        height: 35px;" onchange="addcategorie() ">
                            <option value="Choisissez">selectionnez .....</option>
                            <option value="poussingarcon">poussin garcon</option>
                            <option value="poussinfille">poussin fille</option>
                            <option value="Benjamingarcon">Benjamin garcon</option>
                            <option value="Benjamine">Benjamine</option>
                            <option value="Minimegarcon">Minime garcon</option>
                            <option value="Minimefille">Minime fille</option>
                            <option value="Juniorgarcon">Junior garcon</option>
                            <option value="Juniorfille">Junior fille</option>
                        </select>
                        <i class="zmdi zmdi zmdi-arrow-right" style="margin-right: 15px;"></i>

                    </div>

                    <div class="form-wrapper">
                        <a class="titleform">Telephone ( Ex : 698328283 )</a>
                        <input id="teluser" style="padding-left: 15px;" type="email" placeholder="Contact du joueur ou du responsable ..." class="form-controla">
                        <i class="zmdi zmdi zmdi-email" style="margin-right: 15px;"></i>
                    </div>

                    <div class="form-wrapper">
                        <a class="titleform">Club d'appartenance</a>
                        <input id="clubuser" style="padding-left: 15px;" type="email" placeholder="Ex: TC Yaoundé" class="form-controla">
                    </div>

                    <h2 style="margin-bottom: -30px;">NB : UN JOUEUR NE POURRA S'INSCRIRE QUE DANS UNE SEULE CATEGORIE PAR SEMAINE.</h2>
                    <h2>IMPORTANT : Bien vouloir vous rendre ( joueur ou encadreur ) sur le site de la compétition muni d'une piece d'identité 
                        conforme (passport , CNI , acte de naissance etc...) pour la validation de votre inscription (SIGN IN) en 
                        prelude des tirages au sort le DIMANCHE 13 AOUT 2023 avant 17h .</h2>

                    <div class="form-group container-login100-form-btn" style="margin-bottom: 90px;">
                        <button id="valider" type="button" onclick="send()">
                            Envoyer
                            <i class="zmdi zmdi-arrow-right"></i>
                        </button>
                    </div>
        
                </form>

                    </lottie-player>
                    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
                    <lottie-player class="lottiescript" id="lottieload" src="https://lottie.host/7d8680f1-08e2-48c5-b9c5-d85e94277409/h4XhZ3sxIH.json"
                     background="transparent" speed="1"  loop autoplay></lottie-player>


            </div>
        </section>

        <footer class="footer" id="footer">
            <div class="container">
                <div class="row">
                    <div class="footer-col">
                        <h4>follow us</h4>
               
                        <div class="social-links">
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-instagram"></i></a>
                            <a href="#"><i class="fab fa-likedin-in"></i></a>
                                
                        </div>
                    </div>
                
                </div>
            </div>
            <p class="copyrigth">Copyright © Tous droits réservés - TennisKids</p>

        </footer>
  
        <div class="whatsappid" id="myDiv"></div>

    </body>

    <script type="text/javascript">
        $(function () {
          $('#myDiv').floatingWhatsApp({
            phone: '237698328283',
            popupMessage: 'Comment pouvons nous vous aider?',
            showPopup: true,
            showOnIE: false,
            headerTitle: 'Tennis Kids service!',
            headerColor: 'blue',
            backgroundColor: 'green',
            position: 'right' ,
            size: '50px'
          });
          
        });

        
    </script>


<script>
        
    const firebaseConfig = {
        databaseURL : "https://nlogagolf-ed63e-default-rtdb.asia-southeast1.firebasedatabase.app",
        apiKey: "AIzaSyCDKDeQxFPyVRMyMaxvcOFrxva2Fn7iKnw",
        authDomain: "nlogagolf-ed63e.firebaseapp.com",
        projectId: "nlogagolf-ed63e",
        storageBucket: "nlogagolf-ed63e.appspot.com",
        messagingSenderId: "104686743459",
        appId: "1:104686743459:web:c380b6e47ebb21d413f416",
        measurementId: "G-6BW97RHV89"
    };
    firebase.initializeApp(firebaseConfig)
   
   
    const database = firebase.database();

    var cat = "Choisissez";
    var load = document.getElementById("lottieload");
 
    function containsOnlyNumbers(str) {
        return /^\d+$/.test(str);
    }

    function addcategorie(){
        var getcat = document.getElementById("selectcat").value;
        cat = getcat;
    }

    function send(){

        var nom = $('#nomuser').val().toLowerCase().trim();
        var tel = $('#teluser').val();
        var club = $('#clubuser').val();
        var i = 0;
        var dataRefa = firebase.database().ref("players");

        if(nom != "" & tel != "" & club != "" & cat != "Choisissez" & tel.length == 9 
            & ( containsOnlyNumbers(tel) == true ) ) {

            load.style.display = "block";

            dataRefa.on("value" , function(snapshot){
                snapshot.forEach(function(element){
                    if(element.key == nom.toLowerCase().trim() ) {
                        i = 1;
                    }
                });
                if ( i == 0 ) {
                    var dataRef = firebase.database().ref(cat).child(nom.toLowerCase().trim());
                    dataRef.set({
                                'nom': nom.toLowerCase().trim() ,
                                'tel' : tel.toLowerCase() ,
                                'club' : club.toLowerCase() ,
                                'cat' : cat.toLowerCase()
                        }).then(()=>{

                            (dataRefa.child(nom.toLowerCase().trim())).set({
                                'nom': nom.toLowerCase().trim() ,
                                'tel' : tel.toLowerCase() ,
                                'club' : club.toLowerCase() ,
                                'cat' : cat.toLowerCase()
                            }).then(()=>{
                                load.style.display = 'none';
                                window.alert("enregistrement reuissi. le joueur " + nom + " sera inscrit dans la catégorie " + cat );
                                window.location.href = 'https://kevabcdigital.github.io/website/formulaire.html';
                            }).catch((error)=>{
                                load.style.display = 'none';
                                window.alert("erreur survenue : "+ error);
                            });
                            

                        }).catch((error)=>{
                            load.style.display = 'none';
                            window.alert("erreur survenue : "+ error);
                        });
                } else if ( i == 1 ) {
                    window.alert("le joueur " + nom.toLowerCase().trim() + " a déjà été inscrit . En cas de soucis contactez le juge arbitre / FERDINAND MELATAGUIA : 696 03 90 82");
                    load.style.display = "none";
                }
                
            });
  
        } else if ( nom == "" ) {
          window.alert("veuillez entrer le nom complet du joueur...");
        } else if ( cat == "Choisissez" ) {
          window.alert("veuillez renseigner la catégorie du joueur...");
        } else if ( tel == "" ) {
          window.alert("Veuillez entrer numero de téléphone du responsable...");
        } else if ( containsOnlyNumbers(tel) == false ) {
          window.alert("Veuillez entrer numero de téléphone valide sans lettre ...");
        } else if ( tel.length != 9 ) {
          window.alert("Veuillez entrer numero de téléphone à 09 chiffres ...");
        } else if ( club == "" ) {
            window.alert("Veuillez saisir le club du joueur...");
        }
  
    }


</script>
    

</html>
