<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>amicale</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
        <link rel="stylesheet" type="text/css" href="design_files/css/style.css">
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
               
        <script type="text/javascript" src="jquery-3.3.1.min.js"></script>
        <script type="text/javascript" src="floating-wpp.min.js"></script>
        <link rel="stylesheet" href="floating-wpp.min.css">

        <!-- MATERIAL DESIGN ICONIC FONT -->
        <link rel="stylesheet" href="design_files/fonts/material-design-iconic-font/css/material-design-iconic-font.min.css">
                
        <!-- STYLE CSS -->
        <link rel="stylesheet" href="design_files/css/style.css">
    
        <!-- javadev -->

        <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-storage-compat.js"></script>

    </head>

    <body style="background-image: linear-gradient(rgba(0, 0, 0, 0) , rgba(0, 0, 0, 0)), 
    url(./design_files/images/fondform.jpg); background-size: cover; background-position: top; width: 100%;
    position: fixed; top: 0; left: 0; right: 0; z-index: 1050; align-items: center;
    justify-content: center;">
        
        
        <header style="background-color: transparent">

            <input type="checkbox" id="menu-bar">
            <label for="menu-bar">
                <img class="imgmenu" src="./design_files/images/images/menubtnblanc.png" alt="image">
            </label>
            
            <div class="logo">
                <img onclick="openhome();" src="./design_files/images/pngolf.png" alt="image">
            </div>

            
            <div class="menutop">
                <ul>

                    <li class="boutonm" > <img style="width: 100%; height: auto;" src="./design_files/images/menushow.jpg" alt="image"> </li>
                    
                    <li class="boutonm"><a style=" color: rgb(255, 255, 255); font-size: 7px; font-weight: 300; text-align: center;
                        width: 100%; font-family: 'Poppins', sans-serif;">By Kevdesign</a>
                    </li>


                    <li class="boutonm" onclick="opentk();" >
                         <img style="width: 94%; margin-top: 2px; margin-left: 3%; height: auto;" src="./design_files/images/boxa.png" alt="image">
                    </li>

                   <li class="boutonm" onclick="openhome();" >
                        <img style="width: 94%; margin-top: 2px; margin-left: 3%; height: auto;" src="./design_files/images/boxd.png" alt="image">
                   </li>

                   <li class="boutonm" onclick="openamical();" >
                        <img style="width: 94%; margin-left: 3%; margin-top: 5px; height: auto;" src="./design_files/images/boxb.png" alt="image">
                   </li>

                   <li class="boutonm"><a> </a></li>
                   <li class="boutonm"><a> </a></li>
                   <li class="boutonm"><a> </a></li>
                    
                </ul>
            </div>

        </header>

        <section class="indisponibletxt">
            <a style="color: white;" class="txtindis">Désole ce site est accessible uniquement sur des equipements mobiles ( smartphones, tablettes etc ... )</a>
        </section>

      
        <section style=" position: absolute; bottom: 0 ; left: 0; right: 0; margin-left: 14px; margin-right: 14px;
         margin-bottom: 100px; border-radius: 20px; background-color: rgb(7, 47, 22);" class="formulaire" id="formulaire">
            <div style="padding-top: 17px;" class="devisbloc ">

                <form name="formweb" style="padding: 0 35px;" action="">

                    <div class="form-wrapper">
                        <a style="color: rgb(208, 228, 255);" class="titleform">Noms et prénoms du joueur 1 *</a>
                        <input id="joueur1" style=" height: 30px; border: 1px solid #008006ab; padding-left: 15px;" type="text" placeholder="Entrez le nom du joueur 1 ..." class="form-controla">
                        <i class="zmdi zmdi zmdi-arrow-right" style="margin-right: 15px;"></i>
                    </div>

                    <div class="form-wrapper">
                        <a style="color: rgb(208, 228, 255);" class="titleform">Noms et prénoms du joueur 2 *</a>
                        <input id="joueur2" style="height: 30px; border: 1px solid #008006ab; padding-left: 15px;" type="text" placeholder="Entrez le nom du joueur 2 ..." class="form-controla">
                        <i class="zmdi zmdi zmdi-arrow-right" style="margin-right: 15px;"></i>
                    </div>

                    <div class="form-wrapper">
                        <a style="color: rgb(208, 228, 255);" class="titleform">Noms et prénoms du joueur 3 *</a>
                        <input id="joueur3" style="height: 30px; border: 1px solid #008006ab; padding-left: 15px;" type="text" placeholder="Entrez le nom du joueur 3 ..." class="form-controla">
                        <i class="zmdi zmdi zmdi-arrow-right" style="margin-right: 15px;"></i>
                    </div>
                    <div class="form-wrapper">
                        <a style="color: rgb(208, 228, 255);" class="titleform">Créez un mot de passe pour votre partie *</a>
                        <input id="codepass" style="height: 30px; width: 300px; border: 1px solid #008006ab; padding-left: 15px;" type="text" placeholder="Entrez un code à 6 Caractères" class="form-controla">
                        <i class="zmdi zmdi zmdi-arrow-right" style="margin-right: 15px;"></i>
                    </div>

                    

                    <div class="form-group container-login100-form-btn" style="margin-bottom: 20px;">
                        <button id="valider" style="border-radius: 6px; margin-top: 20px; background-color: rgb(238, 255, 0); color: rgb(0, 0, 0);
                              box-shadow: -1px 1px 9px #838109d2; " type="button" onclick="send()">
                            C'est parti 
                            <i class="zmdi zmdi-arrow-right"></i>
                        </button>
                    </div>
        
                </form>

                    </lottie-player>
                    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
                    <lottie-player style="color: #008006ab; margin-top: -5px;" class="lottiescript" id="lottieload" src="https://lottie.host/7d8680f1-08e2-48c5-b9c5-d85e94277409/h4XhZ3sxIH.json"
                     background="transparent" speed="1"  loop autoplay></lottie-player>


            </div>
        </section>


    </body>

    
    <script>

         
        function opentk() {
            window.location.href = 'https://kevabcdigital.github.io/website/formamicale.html';
        }
        function openhome() {
            window.location.href = 'https://kevabcdigital.github.io/website/home.html';
        }
        function openamical() {
            window.location.href = 'https://kevabcdigital.github.io/website/amicalscore.html';
        }
        
            

        const firebaseConfig = {
            databaseURL : "https://nlogagolf-ed63e-default-rtdb.asia-southeast1.firebasedatabase.app",
            apiKey: "AIzaSyCDKDeQxFPyVRMyMaxvcOFrxva2Fn7iKnw",
            authDomain: "nlogagolf-ed63e.firebaseapp.com",
            projectId: "nlogagolf-ed63e",
            storageBucket: "nlogagolf-ed63e.appspot.com",
            messagingSenderId: "104686743459",
            appId: "1:104686743459:web:c380b6e47ebb21d413f416",
            measurementId: "G-6BW97RHV89"
        };
        firebase.initializeApp(firebaseConfig)
    
        const database = firebase.database();

        function indisponible(){
            window.alert('DESOLE ! Ce formulaire est momentanement indisponible.');
        }

        function send(){
            
            
            var load = document.getElementById("lottieload");                
            var joueur1 = $('#joueur1').val().toLowerCase().trim();
            var joueur2 = $('#joueur2').val().toLowerCase().trim();
            var joueur3 = $('#joueur3').val().toLowerCase().trim();
            var codepass = $('#codepass').val();
            var p = 0;
            var dataRef = firebase.database().ref("amical");

            if ( joueur1 != "" & joueur1.length < 21 & joueur3 != "" & joueur3.length < 21 
               & joueur2 != "" & joueur2.length < 21 & codepass != "" & codepass.length == 6
               & joueur1 != "aucun" ) {

                load.style.display = "block";
                // var nbr = 0;            
                // nbr = (Math.round(Math.random() * (900000 - 100000) + 100000));
                // window.alert(nbr);

                var l = 0;
                dataRef.on("value" , function(snapshot){
                    var i = 0;
                    snapshot.forEach(function(element){
                        if(element.key == codepass) {
                            i = 1;
                        }
                    });
                                
                
                    if ( i == 0 ) {
                        var dataRefb = firebase.database().ref("amical").child(codepass);
                        l = 1;
                        dataRefb.set({
                            'a1' : ("") ,
                            'a2' : ("") ,
                            'a3' : ("") ,
                            'a4' : ("") ,
                            'a5' : ("") ,
                            'a6' : ("") ,
                            'a7' : ("") ,
                            'a8' : ("") ,
                            'a9' : ("") ,
                            'a10' : ("") ,
                            'a11' : ("") ,
                            'a12' : ("") ,
                            'a13' : ("") ,
                            'a14' : ("") ,
                            'a15' : ("") ,
                            'a16' : ("") ,
                            'a17' : ("") ,
                            'a18' : ("") ,


                            'b1' : ("") ,
                            'b2' : ("") ,
                            'b3' : ("") ,
                            'b4' : ("") ,
                            'b5' : ("") ,
                            'b6' : ("") ,
                            'b7' : ("") ,
                            'b8' : ("") ,
                            'b9' : ("") ,
                            'b10' : ("") ,
                            'b11' : ("") ,
                            'b12' : ("") ,
                            'b13' : ("") ,
                            'b14' : ("") ,
                            'b15' : ("") ,
                            'b16' : ("") ,
                            'b17' : ("") ,
                            'b18' : ("") ,


                            'c1' : ("") ,
                            'c2' : ("") ,
                            'c3' : ("") ,
                            'c4' : ("") ,
                            'c5' : ("") ,
                            'c6' : ("") ,
                            'c7' : ("") ,
                            'c8' : ("") ,
                            'c9' : ("") ,
                            'c10' : ("") ,
                            'c11' : ("") ,
                            'c12' : ("") ,
                            'c13' : ("") ,
                            'c14' : ("") ,
                            'c15' : ("") ,
                            'c16' : ("") ,
                            'c17' : ("") ,
                            'c18' : ("") ,

                            'joueur1' : (joueur1) ,
                            'joueur2' : (joueur2) ,
                            'joueur3' : (joueur3)

                        }).then(()=>{
                            load.style.display = 'none';
                            window.alert("enregistrement reuissi. , Bonne Partie !");
                            window.location.href = 'https://kevabcdigital.github.io/website/amicalscore.html';                    
                                                
                        }).catch((error)=>{
                            load.style.display = 'none';
                            window.alert("erreur survenue : "+ error);
                        });
                    
                    }
                    
                    if ( ( i == 1 ) & ( l == 0 ) ) {
                        load.style.display = "none";
                        window.alert("le code " + codepass + " a déjà été utilisé pour une partie .");
                        window.location.href = 'https://kevabcdigital.github.io/website/formamicale.html';
                    }
                });
                       




                
                




               
            } else if ( joueur1 == "aucun" ) {
                window.alert("veuillez attribuer un nom correct au joueur 1 ...");
            } else if ( joueur1 == "" ) {
                window.alert("veuillez entrer le nom du joueur 1 ...");
            } else if ( joueur1.length > 20 ) {
                window.alert("le nom du joueur1 doit contenir 20 lettres maximum");
            } else if ( joueur2 == "" ) {
                window.alert("Entrez le nom du deuxieme joueur ou encore entrez le mot aucun pour signifier qu'il nya pas de deuxieme joueur  ...");
            } else if ( joueur2.length > 20 ) {
                window.alert("le nom du joueur2 doit contenir 20 lettres maximum");
            } else if ( joueur3 == "" ) {
                window.alert("Entrer le nom du troisieme joueur ou encore entrez le mot aucun pour signifier qu'il nya pas de troisieme joueur  ...");
            } else if ( joueur3.length > 20 ) {
                window.alert("le nom du joueur3 doit contenir 20 lettres maximum");
            } else if ( codepass == "" ) {
                window.alert("Entrer un mot de passe pour votre partie privée ...");
            } else if ( codepass.length != 6 ) {
                window.alert("le mot de passe doit contenir exactement 6 caracteres");
            }
    
        }

        function invalid() {
            window.alert("Desolé ce formulaire est indisponible pour le moment.");
            window.location.href = 'https://kevabcdigital.github.io/website/home.html';
        }

    </script>
    

</html>
